{% extends 'base.html' %}

{% block title %}Page2{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{url_for('static', filename='css/page2.css') }}">
{% endblock %}
{% block content %}
<div class="container" id="contentContainer">
    <div class="header-container" >
        <div class="logo">
            <img src="Logo.jpg" alt="" style="width: 150px; height: auto;">
        </div>
        <div class="title">
            <h2>Nagarjuna Degree College</h2>
            <h3>School of Management</h3>
        </div>
        <div class="upload-container">
            <input type="file" name="profile_picture" accept="image/*" onchange="previewImage(event)">
            <div id="imagePreview" style="background-image: url('');">
            </div>
        </div>
    </div>

    <form id="myForm" action="{{url_for('app_form.page2')}}" method="POST" enctype="multipart/form-data">
        <!-- Admission Type -->
        <div class="form-group">
            <label>Admission Type:</label>
            <div class="radio-group">
                <input type="radio" name="admission_type" value="pgcet_quota" {% if page2_data.get('admission_type') == 'pgcet_quota' %}checked{% endif %}> PGCET QUOTA
                <input type="radio" name="admission_type" value="management_quota" {% if page2_data.get('admission_type') == 'management_quota' %}checked{% endif %}> MANAGEMENT QUOTA
            </div>
        </div>

        <!-- PGCET No, Admission Order No, Rank (all in one line) -->
        <div class="form-group inline-group">
            <div>
                <label for="pgcet_no">PGCET No:</label>
                <input type="text" id="pgcet_no" name="pgcet_no" value="{{ page2_data.get('pgcet_no', '') }}" required>
            </div>
            <div>
                <label for="admission_order_no">Admission Order No:</label>
                <input type="text" id="admission_order_no" name="admission_order_no" value="{{ page2_data.get('admission_order_no', '') }}" required>
            </div>
            <div>
                <label for="rank">Rank:</label>
                <input type="text" id="rank" name="rank" value="{{ page2_data.get('rank', '') }}" required>
            </div>
        </div>

        <!-- Claimed Category, Allocated Category, KAR/NON-KAR (all in one line) -->
        <div class="form-group inline-group">
            <div>
                <label>Claimed Category:</label>
                <input type="text" name="claimed_category" value="{{ page2_data.get('claimed_category', '') }}" required>
            </div>
            <div>
                <label>Allocated Category:</label>
                <input type="text" name="allocated_category" value="{{ page2_data.get('allocated_category', '') }}" required>
            </div>
            <div>
                <label>Locality:</label>
                <div class="radio-group">
                    <input type="radio" name="locality" value="kar"{% if page2_data.get('locality') == 'kar' %}checked{% endif %}> Kar
                    <input type="radio" name="locality" value="non-kar"{% if page2_data.get('locality') == 'non-kar' %}checked{% endif %}> Non-Kar
                </div>
            </div>
        </div>

        <!-- Personal Details -->
        <div class="section-header">Personal Details (as per SSLC Certificate)</div>
        <div class="form-group">
            <label>Name:</label>
            <div class="inline-group">
                <input type="text" name="first_name" placeholder="First Name" value="{{ page2_data.get('first_name', '') }}" required>
                <input type="text" name="middle_name" placeholder="Middle Name" value="{{ page2_data.get('middle_name', '') }}">
                <input type="text" name="surname" placeholder="Surname" value="{{ page2_data.get('surname', '') }}" required>
            </div>
        </div>

        <div class="form-group">
            <label>Date of Birth:</label>
            <input type="date" name="dob" value="{{ page2_data.get('dob', '') }}" required>
        </div>

        <div class="form-group inline-group">
            <div>
                <label>Gender:</label>
                <div class="radio-group">
                    <input type="radio" name="gender" value="male" {% if page2_data.get('gender') == 'male' %}checked{% endif %}> Male
                    <input type="radio" name="gender" value="female" {% if page2_data.get('gender') == 'female' %}checked{% endif %}> Female
                    <input type="radio" name="gender" value="others" {% if page2_data.get('gender') == 'others' %}checked{% endif %}> Others
                </div>
            </div>
        </div>

        <div class="form-group inline-group">
            <div>
                <label>Nationality:</label>
                <div class="radio-group">
                    <input type="radio" name="nationality" value="indian" {% if page2_data.get('nationality') == 'indian' %}checked{% endif %}> Indian
                    <input type="radio" name="nationality" value="nri" {% if page2_data.get('nationality') == 'nri' %}checked{% endif %}> NRI
                    <input type="radio" name="nationality" value="foreign" {% if page2_data.get('nationality') == 'foreign' %}checked{% endif %}> Foreign Citizen
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Religion:</label>
            <input type="text" name="religion"value="{{ page2_data.get('religion', '') }}" required>
        </div>

        <div class="form-group">
            <label>Blood Group:</label>
            <input type="text" name="blood_group" value="{{ page2_data.get('blood_group', '') }}" required>
        </div>

        <div class="form-group">
            <label>Physically Challenged:</label>
            <div class="radio-group">
                <input type="radio" name="physically_challenged" value="yes" {% if page2_data.get('physically_challenged') == 'yes' %}checked{% endif %}> Yes
                <input type="radio" name="physically_challenged" value="no" {% if page2_data.get('physically_challenged') == 'no' %}checked{% endif %}> No
            </div>
        </div>

        <!-- Category -->
        <div class="form-group">
            <label>Category:</label>
            <div class="radio-group">
                <input type="radio" name="category" value="general" {% if page2_data.get('category') == 'general' %}checked{% endif %}> General
                <input type="radio" name="category" value="obc" {% if page2_data.get('category') == 'obc' %}checked{% endif %}> OBC
                <input type="radio" name="category" value="sc" {% if page2_data.get('category') == 'sc' %}checked{% endif %}> SC
                <input type="radio" name="category" value="st" {% if page2_data.get('category') == 'st' %}checked{% endif %}> ST
                <input type="text" name="st_specify" placeholder="ST (Specify)" value="{{ page2_data.get('st_specify', '') }}">
            </div>
        </div>

        <div class="form-group">
            <label>Aadhaar Card No:</label>
            <input type="text" name="aadhaar_no" value="{{ page2_data.get('aadhaar_no', '') }}" required>
        </div>

        <!-- Parent's Details -->
        <div class="section-header">Parent's Details</div>
        <div class="form-group horizontal-group">
            <div>
                <label>Father's Name:</label>
                <input type="text" name="father_name" value="{{ page2_data.get('father_name', '') }}" required>
            </div>
            <div>
                <label>Mother's Name:</label>
                <input type="text" name="mother_name" value="{{ page2_data.get('mother_name', '') }}" required>
            </div>
        </div>

        <div class="form-group horizontal-group">
            <div>
                <label>Father's Occupation:</label>
                <input type="text" name="father_occupation" value="{{ page2_data.get('father_occupation', '') }}">
            </div>
            <div>
                <label>Mother's Occupation:</label>
                <input type="text" name="mother_occupation" value="{{ page2_data.get('mother_occupation', '') }}">
            </div>
        </div>

        <div class="form-group horizontal-group">
            <div>
                <label>Father's Phone Number:</label>
                <input type="tel" name="father_phone" value="{{ page2_data.get('father_phone', '') }}" required>
            </div>
            <div>
                <label>Mother's Phone Number:</label>
                <input type="tel" name="mother_phone" value="{{ page2_data.get('mother_phone', '') }}" required>
            </div>
        </div>

        <!-- Address for Correspondence -->
        <div class="section-header">Address for Correspondence</div>
        <div class="form-group">
            <label>City:</label>
            <input type="text" name="correspondence_city" value="{{ page2_data.get('correspondence_city', '') }}">
        </div>
        <div class="form-group">
            <label>Pincode:</label>
            <input type="text" name="correspondence_pincode" value="{{ page2_data.get('correspondence_pincode', '') }}">
        </div>
        <div class="form-group">
            <label>State:</label>
            <input type="text" name="correspondence_state" value="{{ page2_data.get('correspondence_state', '') }}">
        </div>
        <div class="form-group">
            <label>Country:</label>
            <input type="text" name="correspondence_country" value="{{ page2_data.get('correspondence_country', '') }}">
        </div>
        <div class="form-group">
            <label>Contact No (Tel):</label>
            <input type="tel" name="correspondence_tel" value="{{ page2_data.get('correspondence_tel', '') }}">
        </div>
        <div class="form-group">
            <label>Mobile:</label>
            <input type="tel" name="correspondence_mobile" value="{{ page2_data.get('correspondence_mobile', '') }}">
        </div>

        <!-- Permanent Address -->
        <div class="section-header">Permanent Address</div>
        <div class="form-group">
            <label>City:</label>
            <input type="text" name="permanent_city" value="{{ page2_data.get('permanent_city', '') }}">
        </div>
        <div class="form-group">
            <label>Pincode:</label>
            <input type="text" name="permanent_pincode" value="{{ page2_data.get('permanent_pincode', '') }}">
        </div>
        <div class="form-group">
            <label>State:</label>
            <input type="text" name="permanent_state" value="{{ page2_data.get('permanent_state', '') }}">
        </div>
        <div class="form-group">
            <label>Country:</label>
            <input type="text" name="permanent_country" value="{{ page2_data.get('permanent_country', '') }}">
        </div>
        <div class="form-group">
            <label>Contact No (Tel):</label>
            <input type="tel" name="permanent_tel" value="{{ page2_data.get('permanent_tel', '') }}">
        </div>
        <div class="form-group">
            <label>Mobile:</label>
            <input type="tel" name="permanent_mobile" value="{{ page2_data.get('permanent_mobile', '') }}">
        </div>

        <!-- Additional Details -->
        <div class="form-group">
            <label>Preferred Contact Time:</label>
            <input type="text" name="preferred_contact_time"value="{{ page2_data.get('preferred_contact_time', '') }}">
        </div>

        <div class="form-group">
            <label>Do you have a passport?</label>
            <div class="radio-group">
                <input type="radio" name="passport" value="yes" {% if page2_data.get('passport') == 'yes' %}checked{% endif %}> Yes
                <input type="radio" name="passport" value="no" {% if page2_data.get('passport') == 'no' %}checked{% endif %}> No
            </div>
        </div>

        <div class="form-group">
            <label>Passport No:</label>
            <input type="text" name="passport_no" value="{{ page2_data.get('passport_no', '') }}">
        </div>
        <div class="form-group">
            <label>Year of Expiry:</label>
            <input type="text" name="passport_expiry" value="{{ page2_data.get('passport_expiry', '') }}">
        </div>
        <div class="form-group">
            <label>Issued on:</label>
            <input type="date" name="passport_issued_on" value="{{ page2_data.get('passport_issued_on', '') }}">
        </div>

        <div class="form-group">
            <button type="submit" name="save" onclick="showConfirmationPopup(event)">Save and Proceed</button>
        </div>
    </form>
</div>
<div id="confirmationPopup" style="display:none; position:fixed; top: 50%; transform: translate(50%,-50%); background:white; padding:20px; border:10px solid #ccc;"></div>
    <p>Once clicked on save, you won't be able to modify the details.Are you sure?</p>
    <button onclick="closePopup()">Back</button>
    <button onclick="saveAndProceed()">Save</button>
</div>

<div id="overlay" class="overlay" style="display:none;"></div>
<script>
function showConfirmationPopup(event){
    event.preventDefault();
    document.getElementById("confirmationPopup").style.display="block";
    document.getElementById("overlay").style.display="block";
    document.getElementById('contentContainer').classList.add('blur');
}

function closePopup(){
    document.getElementById("confirmationPopup").style.display="none";
    document.getElementById("overlay").style.display="none";
    document.getElementById('contentContainer').classList.remove('blur');
}

function saveAndProceed(){
    document.getElementById("myForm").submit();
}
</script>
<!-- <script>
    function previewImage(event) {
        const imagePreview = document.getElementById('imagePreview');
        const file = event.target.files[0];
        const reader = new FileReader();

        reader.onload = function() {
            if (reader.readyState === 2) {
                imagePreview.style.backgroundImage = url(${reader.result});
            }
        }

        if (file) {
            reader.readAsDataURL(file);
        }
    }
</script> -->
{% endblock %}


